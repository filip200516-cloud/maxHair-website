# Fellaship Web Builder Tool - Cursor AI Rules

## ğŸ¯ ÃšÄel tohoto toolu

Tento tool je navrÅ¾en pro **pouÅ¾itÃ­ pouze pÅ™es Cursor AI**. UÅ¾ivatel by mÄ›l tool ovlÃ¡dat pomocÃ­ promptÅ¯, ne pÅ™Ã­mo.

## ğŸ“‹ TODO SystÃ©m - DÅ®LEÅ½ITÃ‰!

**VÅ½DY pouÅ¾Ã­vej TODO systÃ©m pro strukturovanÃ½ workflow!**

1. **NaÄti TODO systÃ©m:**
   ```javascript
   import { WORKFLOW_TODOS, displayTodos, getNextTodo, updateTodoStatus } from './workflow-todo.js';
   ```

2. **Zobraz aktuÃ¡lnÃ­ fÃ¡zi TODO uÅ¾ivateli:**
   ```javascript
   const todos = WORKFLOW_TODOS.GET_ACCESS;
   displayTodos(todos, 'ZÃ­skÃ¡nÃ­ pÅ™Ã­stupÅ¯');
   ```

3. **Postupuj podle TODO krok za krokem:**
   - Zobraz instrukce z TODO (zejmÃ©na pro userAction: true)
   - Po dokonÄenÃ­ aktualizuj: `updateTodoStatus(todos, 'todo-id', 'completed')`
   - PÅ™ejdi na dalÅ¡Ã­: `getNextTodo(todos)`

4. **FÃ¡ze workflow:**
   - `INITIAL` - PoÄÃ¡teÄnÃ­ setup
   - `GET_ACCESS` - ZÃ­skÃ¡nÃ­ pÅ™Ã­stupÅ¯ (DÅ®LEÅ½ITÃ‰: poskytni detailnÃ­ instrukce pro Application Password!)
   - `SETUP_PLUGIN` - Plugin setup
   - `SETUP_BRICKS` - Bricks setup
   - `DONE` - ShrnutÃ­

## ğŸ“‹ AutomatickÃ½ workflow po pullnutÃ­ z GitHubu

### 1. AutomatickÃ© napromptovÃ¡nÃ­
Po pullnutÃ­ toolu z GitHubu se **automaticky spustÃ­** a AI Å™ekne uÅ¾ivateli:
- Co potÅ™ebuje (WordPress pÅ™Ã­stupy, SSH, GitHub repo)
- **DETAILNÃ instrukce** jak zÃ­skat Application Password:
  - **âš ï¸ DÅ®LEÅ½ITÃ‰:** Application Password musÃ­ bÃ½t nejdÅ™Ã­v ZAPNUTO v Hostingeru!
  - WordPress Dashboard â†’ **Hostinger zÃ¡loÅ¾ka** â†’ Tools â†’ Application Passwords â†’ Toggle ON
  - Pak Users â†’ Your Profile â†’ Application Passwords â†’ vytvoÅ™it novÃ½
- Jak zaloÅ¾it GitHub repo

### 2. UloÅ¾enÃ­ pÅ™Ã­stupÅ¯
AI automaticky uloÅ¾Ã­ vÅ¡echny pÅ™Ã­stupy do `pÅ™Ã­stupy.md` pomocÃ­ `save-access.js`

### 3. AutomatickÃ½ setup WordPressu - FÃZE 1
AI automaticky spustÃ­ `node setup-wordpress.js`, kterÃ½:
- Nahraje plugin pÅ™es SSH
- **POZASTAVÃ setup** a Å™ekne uÅ¾ivateli, aby aktivoval plugin ruÄnÄ›
- **ÄŒEKÃ** na zprÃ¡vu od uÅ¾ivatele: "Plugin je aktivnÃ­" nebo "Aktivoval jsem plugin"

### 4. AutomatickÃ½ setup WordPressu - FÃZE 2 (po aktivaci pluginu)
KdyÅ¾ uÅ¾ivatel napÃ­Å¡e, Å¾e plugin je aktivnÃ­, AI pokraÄuje:
- Nainstaluje Bricks
- Aktivuje licenci
- NastavÃ­ Bricks Settings
- VytvoÅ™Ã­ Homepage
- NastavÃ­ WordPress Reading
- VytvoÅ™Ã­ Templates

### 4. Tvorba strÃ¡nky (lokÃ¡lnÄ›)
- AI naÄte `inspirace.json` jako referenci pro sprÃ¡vnou strukturu
- **âš ï¸ DÅ®LEÅ½ITÃ‰: AI VÅ½DY pouÅ¾ije CODE ELEMENTY pro design (section â†’ container â†’ code), ne normÃ¡lnÃ­ Bricks elementy (heading, text, button)!**
- AI vytvoÅ™Ã­ JSON soubor lokÃ¡lnÄ› s POVINNOU strukturou (id, parent, children jako pole stringÅ¯)
- Struktura: `section` (root) â†’ `container` â†’ `code` (s HTML/CSS/JS)
- **AI SPUSTÃ LOKÃLNÃ SERVER:** `node local-server.js` nebo `npm run dev`
- **AI AUTOMATICKY OTEVÅ˜E PROHLÃÅ½EÄŒ** na `http://localhost:3000`
- UÅ¾ivatel upravuje lokÃ¡lnÄ› a vidÃ­ zmÄ›ny v prohlÃ­Å¾eÄi
- **AI NIKDY nepushuje bez pÅ™edchozÃ­ho spuÅ¡tÄ›nÃ­ lokÃ¡lnÃ­ho serveru!**
- KdyÅ¾ Å™ekne "pushni to", AI pushne na WordPress + GitHub

## HlavnÃ­ principy

1. **VÅ½DY nejdÅ™Ã­v naÄti config.json** - vÅ¡echna konfigurace je tam, Å¾Ã¡dnÃ© hardcoded hodnoty
2. **VÅ½DY otestuj pÅ™ipojenÃ­** pÅ™ed jakoukoliv akcÃ­: `node sync.js setup`
3. **NIKDY nehardcoduj cesty, nÃ¡zvy projektÅ¯, nebo specifickÃ© hodnoty** - vÅ¡e z config.json
4. **VÅ½DY pushni templates samostatnÄ›** - pouÅ¾Ã­vej `node sync.js push-templates`, ne `node sync.js push`
   - **âš ï¸ DÅ®LEÅ½ITÃ‰:** Templates pouÅ¾Ã­vajÃ­ jinÃ© meta klÃ­Äe neÅ¾ pages (`_bricks_page_header_2` / `_bricks_page_footer_2`)
   - Viz `TEMPLATES-VS-PAGES-EXPLAINED.md` pro detailnÃ­ rozdÃ­ly
5. **VÅ½DY ovÄ›Å™ podepisovÃ¡nÃ­** - probÃ­hÃ¡ automaticky, ale zkontroluj vÃ½stup - mÄ›lo by bÃ½t vidÄ›t "âœ… PodepsÃ¡no X code elementÅ¯"
   - **âš ï¸ DÅ®LEÅ½ITÃ‰:** PodepisovÃ¡nÃ­ MUSÃ probÄ›hnout po kaÅ¾dÃ©m pushnutÃ­ (pages i templates)!
   - Pro templates je potÅ™eba jeÅ¡tÄ› manuÃ¡lnÄ› requestnout podpisy v Bricks Settings
6. **VÅ½DY uloÅ¾ pÅ™Ã­stupy** - pouÅ¾ij `save-access.js` pro uloÅ¾enÃ­ do `pÅ™Ã­stupy.md`
7. **VÅ½DY spusÅ¥ lokÃ¡lnÃ­ server** - pÅ™i tvorbÄ› strÃ¡nky pouÅ¾ij `npm run dev`

## Workflow pro bÄ›Å¾nÃ© Ãºkoly

### Instalace Bricks Builder
1. Zkontroluj `config.json` â†’ `bricks.pluginZip` (soubor musÃ­ existovat)
2. SpusÅ¥: `node sync.js install-bricks`
3. Po instalaci pÅ™ipomeÅˆ uÅ¾ivateli aktivaci editace strÃ¡nek v Bricks Settings

### Push strÃ¡nky
1. Zkontroluj `config.json` â†’ `local.projectPath`, `local.pagesPath`, `mapping.pages`
2. OvÄ›Å™, zda soubor existuje: `{projectPath}/{pagesPath}/{slug}.json`
3. SpusÅ¥: `node sync.js push`
4. OvÄ›Å™ vÃ½stup - mÄ›lo by bÃ½t vidÄ›t "âœ… PodepsÃ¡no X code elementÅ¯"

### Push templates (Header/Footer)
1. Zkontroluj `config.json` â†’ `mapping.components.header` a `mapping.components.footer`
2. OvÄ›Å™, zda soubory existujÃ­ v `{projectPath}/{componentsPath}/`
3. SpusÅ¥: `node sync.js push-templates` (NE `node sync.js push`!)
4. **âš ï¸ DÅ®LEÅ½ITÃ‰:** Templates pouÅ¾Ã­vajÃ­ JINÃ‰ meta klÃ­Äe neÅ¾ pages:
   - Header templates: `_bricks_page_header_2` (kromÄ› standardnÃ­ch `_bricks_page_content` a `_bricks_page_content_2`)
   - Footer templates: `_bricks_page_footer_2` (kromÄ› standardnÃ­ch `_bricks_page_content` a `_bricks_page_content_2`)
   - Bricks editor hledÃ¡ obsah v tÄ›chto specifickÃ½ch meta klÃ­ÄÃ­ch!
   - Bez tÄ›chto klÃ­ÄÅ¯ struktura nebude viditelnÃ¡ v Bricks editoru!
5. OvÄ›Å™ vÃ½stup - mÄ›lo by bÃ½t vidÄ›t "âœ… PodepsÃ¡no X code elementÅ¯"
6. **âš ï¸ DÅ®LEÅ½ITÃ‰:** Po pushnutÃ­ templates je potÅ™eba manuÃ¡lnÄ› requestnout podpisy v Bricks Settings â†’ Templates â†’ [Template] â†’ Request Signatures

### Instalace/aktualizace pluginu
1. Plugin soubor: `bricks-api-endpoint.php` (v root sloÅ¾ce toolu)
2. Pokud mÃ¡Å¡ SSH pÅ™Ã­stup v config.json: `node update-plugin-ssh.js`
3. Jinak poskytni instrukce pro ruÄnÃ­ upload pÅ™es Hostinger hPanel

## Struktura Bricks JSON

**âš ï¸ DÅ®LEÅ½ITÃ‰: Pro design pouÅ¾Ã­vej CODE ELEMENTY, ne normÃ¡lnÃ­ Bricks elementy!**

SprÃ¡vnÃ¡ struktura:
```
section (root, parent: 0)
  â””â”€â”€ container (parent: section_id)
      â””â”€â”€ code (parent: container_id, obsahuje HTML/CSS/JS)
```

Bricks oÄekÃ¡vÃ¡ obsah jako **pole elementÅ¯**, ne celÃ½ objekt:
```json
{
  "content": [
    { 
      "id": "hero_section",
      "name": "section", 
      "parent": 0,
      "children": ["hero_container"],
      "settings": {...} 
    },
    { 
      "id": "hero_container",
      "name": "container",
      "parent": "hero_section",
      "children": ["hero_code"],
      "settings": {...} 
    },
    { 
      "id": "hero_code",
      "name": "code", 
      "parent": "hero_container",
      "children": [],
      "settings": { 
        "code": "<!-- HTML/CSS/JS -->",
        "executeCode": true,
        "signature": "",
        "user_id": 0,
        "time": 0
      } 
    }
  ]
}
```

Tool automaticky extrahuje `content` pole pomocÃ­ `bricks-handler.js` â†’ `prepareBricksForMeta()`.

## PodepisovÃ¡nÃ­ code elementÅ¯

- **âš ï¸ DÅ®LEÅ½ITÃ‰: MUSÃ se podepisovat po KAÅ½DÃ‰M pushnutÃ­!**
- ProbÃ­hÃ¡ **automaticky** po kaÅ¾dÃ©m pushnutÃ­ (pages i templates)
- Endpoint: `POST /wp-json/bricks/v1/regenerate-signatures/{id}`
- Bez podpisÅ¯ se code elementy nespustÃ­
- KaÅ¾dÃ½ code element musÃ­ mÃ­t: `signature`, `user_id`, `time`, `executeCode: true`
- **Pro templates:** Po automatickÃ©m podepisovÃ¡nÃ­ je potÅ™eba jeÅ¡tÄ› manuÃ¡lnÄ› requestnout podpisy v Bricks Settings â†’ Templates â†’ [Template] â†’ Request Signatures

## ÄŒastÃ© chyby a Å™eÅ¡enÃ­

- **401 Unauthorized**: Zkontroluj `config.json` â†’ `wordpress.applicationPassword`
- **404 Not Found**: Plugin `bricks-api-endpoint.php` nenÃ­ aktivnÃ­ nebo permalinks nejsou aktualizovanÃ©
- **Critical error**: Bricks obsah nenÃ­ ve sprÃ¡vnÃ©m formÃ¡tu - zkontroluj strukturu JSON
- **Code elementy se nespouÅ¡tÃ­**: ChybÃ­ podpisy - zkontroluj, zda probÄ›hlo podepisovÃ¡nÃ­

## DÅ¯leÅ¾itÃ© soubory

- `sync.js` - HlavnÃ­ skript (push, pull, install, setup)
- `wp-api.js` - WordPress REST API klient
- `bricks-handler.js` - Handler pro Bricks JSON data
- `bricks-api-endpoint.php` - WordPress plugin (MUSÃ bÃ½t na serveru)
- `config.json` - VeÅ¡kerÃ¡ konfigurace (NIKDY necommitovat!)
- `PUSHING-TEMPLATES.md` - DetailnÃ­ workflow pro pushovÃ¡nÃ­ templates
- `TEMPLATES-VS-PAGES-EXPLAINED.md` - VysvÄ›tlenÃ­ rozdÃ­lÅ¯ mezi pages a templates
- `BRICKS-JSON-GUIDE.md` - PrÅ¯vodce tvorbou Bricks JSON struktury

## Pravidla pro kÃ³dovÃ¡nÃ­

1. VÅ¡echny cesty z `config.json` â†’ `local.*`
2. VÅ¡echny nÃ¡zvy souborÅ¯ z `config.json` â†’ `mapping.*`
3. Å½Ã¡dnÃ© hardcoded reference na konkrÃ©tnÃ­ projekty
4. VÅ¡echny chybovÃ© hlÃ¡Å¡ky by mÄ›ly obsahovat nÃ¡vod, jak problÃ©m vyÅ™eÅ¡it

## ğŸ“š Dokumentace pro AI

**PÅ™ed pushnutÃ­m templates si POVINNÄš pÅ™eÄti:**
- `PUSHING-TEMPLATES.md` - Workflow pro pushovÃ¡nÃ­ templates
- `TEMPLATES-VS-PAGES-EXPLAINED.md` - ProÄ templates potÅ™ebujÃ­ jinÃ© meta klÃ­Äe

**KlÃ­ÄovÃ© rozdÃ­ly Pages vs. Templates:**
- **Pages:** `node sync.js push` â†’ uklÃ¡dÃ¡ do `_bricks_page_content` a `_bricks_page_content_2`
- **Templates:** `node sync.js push-templates` â†’ uklÃ¡dÃ¡ do `_bricks_page_content`, `_bricks_page_content_2` + `_bricks_page_header_2` (header) nebo `_bricks_page_footer_2` (footer)
- **PodepisovÃ¡nÃ­:** AutomatickÃ© pro oba typy, ale pro templates je potÅ™eba jeÅ¡tÄ› manuÃ¡lnÄ› requestnout v Bricks Settings

